@page "/ui/context-graph"
@using DevBuddy.Server.Data.Models
@using DevBuddy.Server.Services
@inject IDomainService DomainService
@inject IGraphNodeService GraphNodeService
@inject IJSRuntime JSRuntime
@rendermode InteractiveServer

<PageTitle>Context Graph - DevBuddy</PageTitle>

<div class="container-fluid">
    <h1 class="mb-4">
        <i class="bi bi-diagram-3 text-primary"></i>
        Context Graph
    </h1>

    <ul class="nav nav-tabs mb-3" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link @(activeTab == "graph" ? "active" : "")" 
                    @onclick='() => SetActiveTab("graph")'
                    type="button">
                <i class="bi bi-diagram-3"></i> Graph Editor
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link @(activeTab == "domains" ? "active" : "")" 
                    @onclick='() => SetActiveTab("domains")'
                    type="button">
                <i class="bi bi-folder-tree"></i> Domains & Node Types
            </button>
        </li>
    </ul>

    <div class="tab-content">
        @if (activeTab == "graph")
        {
            <div class="tab-pane fade show active">
                <GraphEditorTab />
            </div>
        }
        else if (activeTab == "domains")
        {
            <div class="tab-pane fade show active">
                <DomainsTab />
            </div>
        }
    </div>
</div>

@code {
    private string activeTab = "graph";

    private void SetActiveTab(string tab)
    {
        activeTab = tab;
    }
}
